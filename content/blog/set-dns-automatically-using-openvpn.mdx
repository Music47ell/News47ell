---
title: Set DNS Automatically Using OpenVPN
description: Learn how to Set DNS Automatically Using OpenVPN.
published_at: 2018-01-10T18:08:45+00:00
tags: ['DNS', 'OpenVPN', 'VPN']
---

The idea for this article started after hearing [TWiT Security Now podcast][1], episode [Quad Nine][2] where [Steve Gibson][3] and [Leo Laporte][4] talk about what they described as a ‘very appealing and speedy new alternative DNS service, called [Quad9][5].’

I wanted my DNS on all my devices to be set automatically without me having to re-configure it every time I join a new network.

As we all know, in iOS, you need to change your DNS records for each and every network. On Android, you need to change your IP settings first to static then write the IP manually. After that, you’d enter your preferred DNS for each and every network.

Well, shit. This is way too much work for something that should be quite easy and simple and more importantly, automatic. As in, set it and forget it.

If you use a VPN, as you should, then keep reading to learn How to Set DNS Automatically Using OpenVPN

What I did was take advantage of the fact that I use a VPN[^fn1] with the OpenVPN app[^fn2] and I configured my `.ovpn` file to uses a specific DNS every time it connects to the VPN network by adding the following line:

```bash
dhcp-option DNS X.X.X.X
```

Voilà. You’re good to go.

Test it, you should see that the DNS is now automatically being set to the one you added.

If you want to add something like Google DNS or OpenDNS which contains a primary and secondary DNS record, all you have to do is add that same line a second time with the second DNS record. Like this:

```bash
dhcp-option DNS X.X.X.X
dhcp-option DNS X.X.X.X
```

## Conclusion:

Now, no matter what DNS provider you use, whether it's [Google DNS][6], [OpenDNS][7] or the brand new [Quad9 DNS][5] by IBM or [1.1.1.1 DNS][8] by Cloudflare, with this hack you’ll be able to Set DNS Automatically While Using OpenVPN and continue doing your things online.

[^fn1]: I've been using <a href="https://www.news47ell.com/recommends/torguard/">TorGuard</a> for 2 years now without any issues.

[^fn2]: <a href="https://itunes.apple.com/us/app/openvpn-connect/id590379981?mt=8&at=1l3v6xZ&ct=n47_inline">iOS</a> and <a href="https://play.google.com/store/apps/details?id=net.openvpn.openvpn&hl=en">Android</a>.

 [1]: https://twit.tv/shows/security-now
 [2]: http://pca.st/episode/f019799b-9cd4-4e3c-8d8c-252cd1fbca7d
 [3]: https://twitter.com/sggrc
 [4]: https://twitter.com/leolaporte
 [5]: https://www.quad9.net/
 [6]: https://developers.google.com/speed/public-dns/
 [7]: https://www.opendns.com/
 [8]: https://1.1.1.1/
